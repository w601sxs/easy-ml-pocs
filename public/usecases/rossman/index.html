<!DOCTYPE html>
<html lang="en-us">
  <head>

  <meta charset="utf-8">
  <title>Rossman store sales forecast</title>

  <meta name="generator" content="Hugo 0.64.0" />

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">

  <!-- highlight -->
  <link rel="stylesheet" href="plugins/highlight/hybrid.css">

  <!--Favicon-->
  <link rel="icon" href="images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">




  
  <style>
  :root{
    --primary-color:#FF9900;
    --secondary-color:#f9f9f9;
    --text-color:#232F3E;
    --text-color-dark:#161E2D;
    --white-color:#ffffff;
    --font-family:Lato;
  }
  </style>

<!-- Main Stylesheet -->

<link rel="stylesheet" href="/css/style.min.css" media="screen">

<!-- jquiry -->
<script src="plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="plugins/match-height/jquery.matchHeight-min.js"></script>

<!-- highlight -->
<script src="plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


</head>
<body>
  
  <!-- navigation -->
  <header class="shadow-bottom sticky-top bg-white">
    <div class="container">
      <nav class="navbar navbar-expand-md navbar-light">
  <a class="navbar-brand" href="/">
    
    
    
    Easy ML PoCs
    
  </a>
  
  <input id="search" class="small-form-control" placeholder="Search ..."  maxlength="30" size="30">
  

  <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
    aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse text-center" id="navigation">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link text-dark" href="/">Home</a>
      </li>
      
      
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">
          code
        </a>
        <div class="dropdown-menu">
          
          <a class="dropdown-item" href="/preprocessing">Preprocessing</a>
          
          <a class="dropdown-item" href="/training">Training</a>
          
          <a class="dropdown-item" href="/inference">Inference</a>
          
        </div>
      </li>
      
      
      
      <li class="nav-item">
        <a class="nav-link text-dark" href="/usecases">Use cases</a>
      </li>
      
      
      
      <li class="nav-item">
        <a class="nav-link text-dark" href="/contact">contact</a>
      </li>
      
      
      
      <li class="nav-item">
        <a class="nav-link text-dark" href="/faq">Faq</a>
      </li>
      
      
    </ul>
    

    
        
        
        
        <script>
          $(function() {
          var projects = [
            
            {
              value: "Object detection using Pascal VOC dataset with SageMaker",
              label: "Object detection using Pascal VOC dataset with SageMaker",
              url:"\/usecases\/objdetection\/"
            },
            
            {
              value: "SageMaker Object Detection inference",
              label: "SageMaker Object Detection inference",
              url:"\/inference\/sageobjdetection\/"
            },
            
            {
              value: "SageMaker Object Detection preprocessing",
              label: "SageMaker Object Detection preprocessing",
              url:"\/preprocessing\/sageobjdetection\/"
            },
            
            {
              value: "SageMaker Object Detection training",
              label: "SageMaker Object Detection training",
              url:"\/training\/sageobjdetection\/"
            },
            
            {
              value: "Rekognition Object Detection training",
              label: "Rekognition Object Detection training",
              url:"\/training\/rekogobjdetection\/"
            },
            
            {
              value: "Forecast inference",
              label: "Forecast inference",
              url:"\/inference\/forecast\/"
            },
            
            {
              value: "Rekognition Object Detection inference",
              label: "Rekognition Object Detection inference",
              url:"\/inference\/rekogobjdetection\/"
            },
            
            {
              value: "Rekognition Object Detection preprocessing",
              label: "Rekognition Object Detection preprocessing",
              url:"\/preprocessing\/rekogobjdetection\/"
            },
            
            {
              value: "Comprehend custom inference",
              label: "Comprehend custom inference",
              url:"\/inference\/comprehend\/"
            },
            
            {
              value: "Personalize inference",
              label: "Personalize inference",
              url:"\/inference\/personalize\/"
            },
            
            {
              value: "Forecast training",
              label: "Forecast training",
              url:"\/training\/forecast\/"
            },
            
            {
              value: "Personalize training",
              label: "Personalize training",
              url:"\/training\/personalize\/"
            },
            
            {
              value: "BlazingText training",
              label: "BlazingText training",
              url:"\/training\/blazingtext\/"
            },
            
            {
              value: "DeepAR training",
              label: "DeepAR training",
              url:"\/training\/deepar\/"
            },
            
            {
              value: "Kmeans training",
              label: "Kmeans training",
              url:"\/training\/kmeans\/"
            },
            
            {
              value: "Kmeans preprocessing",
              label: "Kmeans preprocessing",
              url:"\/preprocessing\/kmeans\/"
            },
            
            {
              value: "Comprehend custom training",
              label: "Comprehend custom training",
              url:"\/training\/comprehend\/"
            },
            
            {
              value: "Autopilot Inference",
              label: "Autopilot Inference",
              url:"\/inference\/automl\/"
            },
            
            {
              value: "Autopilot Training",
              label: "Autopilot Training",
              url:"\/training\/automl\/"
            },
            
            {
              value: "Xgboost Training",
              label: "Xgboost Training",
              url:"\/training\/xgboost\/"
            },
            
            {
              value: "Autopilot preprocessing",
              label: "Autopilot preprocessing",
              url:"\/preprocessing\/automl\/"
            },
            
            {
              value: "DeepAR preprocessing",
              label: "DeepAR preprocessing",
              url:"\/preprocessing\/deepar\/"
            },
            
            {
              value: "Personalize preprocessing",
              label: "Personalize preprocessing",
              url:"\/preprocessing\/personalize\/"
            },
            
            {
              value: "Select, drop or extract Columns",
              label: "Select, drop or extract Columns",
              url:"\/preprocessing\/selecting\/"
            },
            
            {
              value: "Split dataset to Train and Test",
              label: "Split dataset to Train and Test",
              url:"\/preprocessing\/splittesttrain\/"
            },
            
            {
              value: "Upload to s3",
              label: "Upload to s3",
              url:"\/preprocessing\/uploadtos3\/"
            },
            
            {
              value: "Forecast preprocessing",
              label: "Forecast preprocessing",
              url:"\/preprocessing\/forecast\/"
            },
            
            {
              value: "BlazingText Inference",
              label: "BlazingText Inference",
              url:"\/inference\/blazingtext\/"
            },
            
            {
              value: "DeepAR Inference",
              label: "DeepAR Inference",
              url:"\/inference\/deepar\/"
            },
            
            {
              value: "Pneumonia detection from Chest X-ray images using Rekognition Custom Labels",
              label: "Pneumonia detection from Chest X-ray images using Rekognition Custom Labels",
              url:"\/usecases\/pneumonia\/"
            },
            
            {
              value: "Pneumonia detection from Chest X-ray images using SageMaker",
              label: "Pneumonia detection from Chest X-ray images using SageMaker",
              url:"\/usecases\/pneumoniasage\/"
            },
            
            {
              value: "Rekognition Classification inference",
              label: "Rekognition Classification inference",
              url:"\/inference\/rekogscenes\/"
            },
            
            {
              value: "Rekognition Classification preprocessing",
              label: "Rekognition Classification preprocessing",
              url:"\/preprocessing\/rekogscenes\/"
            },
            
            {
              value: "Rekognition Classification training",
              label: "Rekognition Classification training",
              url:"\/training\/rekogscenes\/"
            },
            
            {
              value: "Rossman store sales forecast",
              label: "Rossman store sales forecast",
              url:"\/usecases\/rossman\/"
            },
            
            {
              value: "SageMaker Image Classification inference",
              label: "SageMaker Image Classification inference",
              url:"\/inference\/sagescenes\/"
            },
            
            {
              value: "SageMaker Image Classification preprocessing",
              label: "SageMaker Image Classification preprocessing",
              url:"\/preprocessing\/sagescenes\/"
            },
            
            {
              value: "SageMaker Image Classification training",
              label: "SageMaker Image Classification training",
              url:"\/training\/sagescenes\/"
            },
            
            {
              value: "SageMaker Kmeans inference",
              label: "SageMaker Kmeans inference",
              url:"\/inference\/kmeans\/"
            },
            
            {
              value: "Use cases",
              label: "Use cases",
              url:"\/usecases\/"
            },
            
            {
              value: "Xgboost Inference",
              label: "Xgboost Inference",
              url:"\/inference\/xgboost\/"
            },
            
            {
              value: "Xgboost preprocessing",
              label: "Xgboost preprocessing",
              url:"\/preprocessing\/xgboost\/"
            },
            
            {
              value: "Blazingtext preprocessing",
              label: "Blazingtext preprocessing",
              url:"\/preprocessing\/blazingtext\/"
            },
            
            {
              value: "Comprehend custom preprocessing",
              label: "Comprehend custom preprocessing",
              url:"\/preprocessing\/comprehend\/"
            },
            
            {
              value: "1. Preprocessing",
              label: "1. Preprocessing",
              url:"\/preprocessing\/"
            },
            
            {
              value: "2. Training",
              label: "2. Training",
              url:"\/training\/"
            },
            
            {
              value: "3. Inference",
              label: "3. Inference",
              url:"\/inference\/"
            },
            
            {
              value: "Categories",
              label: "Categories",
              url:"\/categories\/"
            },
            
            {
              value: "Contribute a use case or contact us for help.",
              label: "Contribute a use case or contact us for help.",
              url:"\/contact\/"
            },
            
            {
              value: "Easy ML PoCs",
              label: "Easy ML PoCs",
              url:"\/"
            },
            
            {
              value: "Frequently Asked Questions",
              label: "Frequently Asked Questions",
              url:"\/faq\/"
            },
            
            {
              value: "Tags",
              label: "Tags",
              url:"\/tags\/"
            },
            
          ];
          $( "#search" ).autocomplete({
              minLength: 0,
              source: projects,
              focus: function( event, ui ) {
                $( "#search" ).val( ui.item.label );
                return false;
              },
              select: function( event, ui ) {
                $( "#search" ).val( ui.item.label );
                $( "#project-id" ).val( ui.item.value );
                return false;
              }
          })
          .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li>" )
            .append( "<a href=" + item.url + " + \" &quot;\" +  >" + item.label + "</a>" )
            .appendTo( ul );
          };
          });
        </script>
  </div>
</nav>
    </div>
  </header>
  <!-- /navigation -->
  
  <div id="content">

<!-- details page -->
<section class="single section bg-gray pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="mb-5 bg-white p-4 sticky-top top-100">
          <ul class="list-styled">
            
            <a class="d-block h4 back-btn" href="/"></a>
            
            




<li data-nav-id="/usecases/" title="Use cases" class="sidelist
  parent
  
  ">
  <a href="/usecases/">
    Use cases
  </a>
  
  
  <ul>
    
    
    
    
    

    
    
    




<li data-nav-id="/usecases/objdetection/" title="Object detection using Pascal VOC dataset with SageMaker" class="sidelist
  
  
  ">
  <a href="/usecases/objdetection/">
    Object detection using Pascal VOC dataset with SageMaker
  </a>
  
  


    
    
    
    




<li data-nav-id="/usecases/pneumonia/" title="Pneumonia detection from Chest X-ray images using Rekognition Custom Labels" class="sidelist
  
  
  ">
  <a href="/usecases/pneumonia/">
    Pneumonia detection from Chest X-ray images using Rekognition Custom Labels
  </a>
  
  


    
    
    
    




<li data-nav-id="/usecases/pneumoniasage/" title="Pneumonia detection from Chest X-ray images using SageMaker" class="sidelist
  
  
  ">
  <a href="/usecases/pneumoniasage/">
    Pneumonia detection from Chest X-ray images using SageMaker
  </a>
  
  


    
    
    
    




<li data-nav-id="/usecases/rossman/" title="Rossman store sales forecast" class="sidelist
  parent
  active
  ">
  <a href="/usecases/rossman/">
    Rossman store sales forecast
  </a>
  
  


    
    
  </ul>
</li>



            
            




<li data-nav-id="/preprocessing/" title="1. Preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/">
    1. Preprocessing
  </a>
  
  
  <ul>
    
    
    
    
    

    
    
    




<li data-nav-id="/preprocessing/sageobjdetection/" title="SageMaker Object Detection preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/sageobjdetection/">
    SageMaker Object Detection preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/rekogobjdetection/" title="Rekognition Object Detection preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/rekogobjdetection/">
    Rekognition Object Detection preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/kmeans/" title="Kmeans preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/kmeans/">
    Kmeans preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/automl/" title="Autopilot preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/automl/">
    Autopilot preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/deepar/" title="DeepAR preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/deepar/">
    DeepAR preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/personalize/" title="Personalize preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/personalize/">
    Personalize preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/selecting/" title="Select, drop or extract Columns" class="sidelist
  
  
  ">
  <a href="/preprocessing/selecting/">
    Select, drop or extract Columns
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/splittesttrain/" title="Split dataset to Train and Test" class="sidelist
  
  
  ">
  <a href="/preprocessing/splittesttrain/">
    Split dataset to Train and Test
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/uploadtos3/" title="Upload to s3" class="sidelist
  
  
  ">
  <a href="/preprocessing/uploadtos3/">
    Upload to s3
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/forecast/" title="Forecast preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/forecast/">
    Forecast preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/rekogscenes/" title="Rekognition Classification preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/rekogscenes/">
    Rekognition Classification preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/sagescenes/" title="SageMaker Image Classification preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/sagescenes/">
    SageMaker Image Classification preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/xgboost/" title="Xgboost preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/xgboost/">
    Xgboost preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/blazingtext/" title="Blazingtext preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/blazingtext/">
    Blazingtext preprocessing
  </a>
  
  


    
    
    
    




<li data-nav-id="/preprocessing/comprehend/" title="Comprehend custom preprocessing" class="sidelist
  
  
  ">
  <a href="/preprocessing/comprehend/">
    Comprehend custom preprocessing
  </a>
  
  


    
    
  </ul>
</li>



            
            




<li data-nav-id="/training/" title="2. Training" class="sidelist
  
  
  ">
  <a href="/training/">
    2. Training
  </a>
  
  
  <ul>
    
    
    
    
    

    
    
    




<li data-nav-id="/training/sageobjdetection/" title="SageMaker Object Detection training" class="sidelist
  
  
  ">
  <a href="/training/sageobjdetection/">
    SageMaker Object Detection training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/rekogobjdetection/" title="Rekognition Object Detection training" class="sidelist
  
  
  ">
  <a href="/training/rekogobjdetection/">
    Rekognition Object Detection training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/forecast/" title="Forecast training" class="sidelist
  
  
  ">
  <a href="/training/forecast/">
    Forecast training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/personalize/" title="Personalize training" class="sidelist
  
  
  ">
  <a href="/training/personalize/">
    Personalize training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/blazingtext/" title="BlazingText training" class="sidelist
  
  
  ">
  <a href="/training/blazingtext/">
    BlazingText training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/deepar/" title="DeepAR training" class="sidelist
  
  
  ">
  <a href="/training/deepar/">
    DeepAR training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/kmeans/" title="Kmeans training" class="sidelist
  
  
  ">
  <a href="/training/kmeans/">
    Kmeans training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/comprehend/" title="Comprehend custom training" class="sidelist
  
  
  ">
  <a href="/training/comprehend/">
    Comprehend custom training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/automl/" title="Autopilot Training" class="sidelist
  
  
  ">
  <a href="/training/automl/">
    Autopilot Training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/xgboost/" title="Xgboost Training" class="sidelist
  
  
  ">
  <a href="/training/xgboost/">
    Xgboost Training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/rekogscenes/" title="Rekognition Classification training" class="sidelist
  
  
  ">
  <a href="/training/rekogscenes/">
    Rekognition Classification training
  </a>
  
  


    
    
    
    




<li data-nav-id="/training/sagescenes/" title="SageMaker Image Classification training" class="sidelist
  
  
  ">
  <a href="/training/sagescenes/">
    SageMaker Image Classification training
  </a>
  
  


    
    
  </ul>
</li>



            
            




<li data-nav-id="/inference/" title="3. Inference" class="sidelist
  
  
  ">
  <a href="/inference/">
    3. Inference
  </a>
  
  
  <ul>
    
    
    
    
    

    
    
    




<li data-nav-id="/inference/sageobjdetection/" title="SageMaker Object Detection inference" class="sidelist
  
  
  ">
  <a href="/inference/sageobjdetection/">
    SageMaker Object Detection inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/forecast/" title="Forecast inference" class="sidelist
  
  
  ">
  <a href="/inference/forecast/">
    Forecast inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/rekogobjdetection/" title="Rekognition Object Detection inference" class="sidelist
  
  
  ">
  <a href="/inference/rekogobjdetection/">
    Rekognition Object Detection inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/comprehend/" title="Comprehend custom inference" class="sidelist
  
  
  ">
  <a href="/inference/comprehend/">
    Comprehend custom inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/personalize/" title="Personalize inference" class="sidelist
  
  
  ">
  <a href="/inference/personalize/">
    Personalize inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/automl/" title="Autopilot Inference" class="sidelist
  
  
  ">
  <a href="/inference/automl/">
    Autopilot Inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/blazingtext/" title="BlazingText Inference" class="sidelist
  
  
  ">
  <a href="/inference/blazingtext/">
    BlazingText Inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/deepar/" title="DeepAR Inference" class="sidelist
  
  
  ">
  <a href="/inference/deepar/">
    DeepAR Inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/rekogscenes/" title="Rekognition Classification inference" class="sidelist
  
  
  ">
  <a href="/inference/rekogscenes/">
    Rekognition Classification inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/sagescenes/" title="SageMaker Image Classification inference" class="sidelist
  
  
  ">
  <a href="/inference/sagescenes/">
    SageMaker Image Classification inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/kmeans/" title="SageMaker Kmeans inference" class="sidelist
  
  
  ">
  <a href="/inference/kmeans/">
    SageMaker Kmeans inference
  </a>
  
  


    
    
    
    




<li data-nav-id="/inference/xgboost/" title="Xgboost Inference" class="sidelist
  
  
  ">
  <a href="/inference/xgboost/">
    Xgboost Inference
  </a>
  
  


    
    
  </ul>
</li>



            
            




<li data-nav-id="/contact/" title="Contribute a use case or contact us for help." class="sidelist
  
  
  ">
  <a href="/contact/">
    Contribute a use case or contact us for help.
  </a>
  
  


            
            




<li data-nav-id="/faq/" title="Frequently Asked Questions" class="sidelist
  
  
  ">
  <a href="/faq/">
    Frequently Asked Questions
  </a>
  
  


            
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-5 bg-white">
          <h2 class="mb-5">Rossman store sales forecast</h2>
          
          <div class="content"><h3 id="introduction">Introduction</h3>
<p>Dirk Rossmann GmbH is Germany&rsquo;s second-largest drug store chain (after dm-drogerie markt), with over 4000 stores in Europe.</p>
<p>You are provided with historical sales data for 1,115 Rossmann stores. The task is to forecast the &ldquo;Sales&rdquo; column for the test set. Note that some stores in the dataset were temporarily closed for refurbishment.</p>
<p>This data was obtained from Kaggle <a href="https://www.kaggle.com/c/rossmann-store-sales/data">here</a></p>
<p>For folks who want to repeat this use case, the data is stored as a direct download <a href="s3://easy-ml-pocs/rossman-sales-data/rossman-sales.csv">here</a></p>
<p>The first few rows of the raw csv data looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&#34;Store&#34;,&#34;DayOfWeek&#34;,&#34;Date&#34;,&#34;Sales&#34;,&#34;Customers&#34;,&#34;Open&#34;,&#34;Promo&#34;,&#34;StateHoliday&#34;,&#34;SchoolHoliday&#34;
1,5,2015-07-31,5263,555,1,1,&#34;0&#34;,&#34;1&#34;
2,5,2015-07-31,6064,625,1,1,&#34;0&#34;,&#34;1&#34;
3,5,2015-07-31,8314,821,1,1,&#34;0&#34;,&#34;1&#34;
4,5,2015-07-31,13995,1498,1,1,&#34;0&#34;,&#34;1&#34;
5,5,2015-07-31,4822,559,1,1,&#34;0&#34;,&#34;1&#34;
6,5,2015-07-31,5651,589,1,1,&#34;0&#34;,&#34;1&#34;
7,5,2015-07-31,15344,1414,1,1,&#34;0&#34;,&#34;1&#34;
8,5,2015-07-31,8492,833,1,1,&#34;0&#34;,&#34;1&#34;
9,5,2015-07-31,8565,687,1,1,&#34;0&#34;,&#34;1&#34;
</code></pre></div><h3 id="assumptions">Assumptions</h3>
<p>For this PoC, we will simplify the dataset by dropping a few columns. Many of the following assumptions may be inaccurate, but this is a PoC, and we want to exercise the provided code samples end-to-end. Let us try to forecast the <code>Sales</code> column for each store by <code>Store</code> ID, and <code>Promo</code>. We will first and drop:</p>
<ul>
<li><code>DayOfWeek</code> assuming most of the days have similar sales until the weekend</li>
<li><code>Customers</code> assuming this is number of customers, and we will not have access to this value until after the day</li>
<li><code>Open</code> assuming it the stores are open except during holidays, and we have a column that takes care of that</li>
<li><code>SchoolHoliday</code>, since to prove this out, we will be considering other columns with dynamic values, like <code>Promo</code></li>
<li><code>StateHoliday</code>, since the unique values in the column are [0,a,b,c]</li>
</ul>
<h3 id="step-1---preprocessing">Step 1 - Preprocessing</h3>
<h4 id="step-11---drop-and-rearrange-columns">Step 1.1 - Drop and rearrange columns</h4>
<p>From the code on this page on <a href="../../preprocessing/selecting">Select, drop or extract Columns</a>, copy the following line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">awk -F &#34;|&#34; &#39;{ print $1 $3 $5 }&#39; Folder/in*csv &gt; outfile.csv
</code></pre></div><p>and adapt it for our use case:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">awk -F&#34;,&#34; &#39;{ {gsub(/\&#34;/,&#34;&#34;)}; print $3&#34;,&#34;$1&#34;,&#34;$4&#34;,&#34;$7}&#39; rossman-sales.csv &gt; outfile.csv
</code></pre></div><p>Now, the data in outfile.csv looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">Date,Store,Sales,Promo
2015-07-31,1,5263,1
2015-07-31,2,6064,1
2015-07-31,3,8314,1
2015-07-31,4,13995,1
2015-07-31,5,4822,1
2015-07-31,6,5651,1
2015-07-31,7,15344,1
2015-07-31,8,8492,1
2015-07-31,9,8565,1
</code></pre></div><p>Note that we also used the find-and-replace from the same <a href="../../preprocessing/selecting">link</a> using <code>awk</code> to replace all the double-quotes (&quot;) by an empty string (basically remove all double-quotes)</p>
<h4 id="step-12---prepare-data-for-deepar">Step 1.2 - Prepare data for DeepAR</h4>
<p>From <a href="../../preprocessing/deepar/">this link</a>, you can create a new python file with the following contents:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> jsonlines
<span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> preprocessing
le <span style="color:#f92672">=</span> preprocessing<span style="color:#f92672">.</span>LabelEncoder()


series <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">outfile.csv</span><span style="color:#e6db74">&#39;</span>, parse_dates<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>], index_col<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
series<span style="color:#f92672">.</span>sort_index(inplace<span style="color:#f92672">=</span>True)

target_column <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Sales</span><span style="color:#e6db74">&#39;</span>
group_column <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Store</span><span style="color:#e6db74">&#39;</span>

<span style="color:#66d9ef">for</span> col <span style="color:#f92672">in</span> series<span style="color:#f92672">.</span>columns:
    <span style="color:#66d9ef">if</span> col <span style="color:#f92672">!=</span>target_column:
        series[col] <span style="color:#f92672">=</span> le<span style="color:#f92672">.</span>fit_transform(series[col])

<span style="color:#66d9ef">if</span> series[group_column]<span style="color:#f92672">.</span>nunique()<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>:
    a <span style="color:#f92672">=</span> [series]
<span style="color:#66d9ef">else</span>:
    a <span style="color:#f92672">=</span> [v <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> series<span style="color:#f92672">.</span>groupby(group_column)]

out <span style="color:#f92672">=</span> []

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(a)):
    dynamic_feat <span style="color:#f92672">=</span> []
    cat <span style="color:#f92672">=</span> []
    <span style="color:#66d9ef">for</span> col <span style="color:#f92672">in</span> a[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>columns:
        <span style="color:#66d9ef">if</span> col <span style="color:#f92672">==</span> target_column:
            target <span style="color:#f92672">=</span> a[<span style="color:#ae81ff">0</span>][col]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist()
            start <span style="color:#f92672">=</span> str(a[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>index[<span style="color:#ae81ff">0</span>])

        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">if</span> a[<span style="color:#ae81ff">0</span>][col]<span style="color:#f92672">.</span>nunique()<span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>: <span style="color:#75715e">#if 2 or more values, add as dynamic feature</span>
                dynamic_feat<span style="color:#f92672">.</span>append(a[<span style="color:#ae81ff">0</span>][col]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>astype(float)<span style="color:#f92672">.</span>tolist())
            <span style="color:#66d9ef">elif</span> a[<span style="color:#ae81ff">0</span>][col]<span style="color:#f92672">.</span>nunique()<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>: <span style="color:#75715e">#if 1 value, add as category</span>
                cat<span style="color:#f92672">.</span>append(int(a[<span style="color:#ae81ff">0</span>][col][<span style="color:#ae81ff">0</span>]))
    out<span style="color:#f92672">.</span>append({<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">start</span><span style="color:#e6db74">&#39;</span>:start, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">target</span><span style="color:#e6db74">&#39;</span>:target, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">cat</span><span style="color:#e6db74">&#39;</span>:cat, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">dynamic_feat</span><span style="color:#e6db74">&#39;</span>:dynamic_feat})
    
<span style="color:#66d9ef">with</span> jsonlines<span style="color:#f92672">.</span>open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">train-data.jsonl</span><span style="color:#e6db74">&#39;</span>, mode<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">w</span><span style="color:#e6db74">&#39;</span>) <span style="color:#66d9ef">as</span> writer:
    writer<span style="color:#f92672">.</span>write_all(out)
</code></pre></div><blockquote>
<p>The only things we changed are the name of the input file (&lsquo;outfile.csv&rsquo;), the name of the target column and group column.</p>
</blockquote>
<p>Save it as <code>dataprep.py</code>, and run <code>python dataprep.py</code></p>
<p>After running this file, you should get an output file called <code>train-data.jsonl</code> which looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{&#34;start&#34;: &#34;2013-01-01 00:00:00&#34;, &#34;target&#34;: [0, 5530, 4327, 4486, 4997, 0, 7176, 5580, 5471, 4892, 4881, 4952, 0, 4717, 3900, 4008, 4044, 4127, 5182, 0, 5394, 5720, 5578, 5195, 5586, 5598, 0, 4055, 3725, 4601, 4709, 5633, 5970, 0, 7032, 6049, 6140, 5499, 5681, 5370, 0, 4409, 4015, 4252, 4241, 4809, 6154, 0, 6407, 5386, 5660, 5261, 5000, 5237, 0, 4038, 3794, 4558, 4676, 4611, 5350, 0, 7675, 6300, 5973, 5637, 5853, 5578, 0, 4949, 3853, 4341, 5108, 4925, 5003, 0, 7072, 6563, 5598, 5179, 5506, 5603, 0, 6729, 6686, 6660, 7285, 0, 7132, 0, 0, 5484, 4625, 4293, 4390, 5075, 0, 6046, 5514, 4903, 4366, .......
</code></pre></div><h3 id="step-2---training">Step 2 - Training</h3>
<p>From <a href="../../training/deepar">this link</a> on training with DeepAR, we first upload our <code>train-data.jsonl</code> file to S3, and make a note of this <code>path</code>. You can also click the file on the S3 console, and hit the <code>Copy  Path</code> button.</p>
<p><img src="/images/copypath.png" alt=""></p>
<p>Since this is daily data, change the &lsquo;1H&rsquo; frequency in the hyperparameters to &lsquo;1D&rsquo;.</p>
<p>Again from <a href="../../training/deepar">this link</a> on training with DeepAR, copy all the code cells in a python file, or use a local jupyter notebook (make sure you have the right permissions and have run <code>aws configure</code>); you can also run the following cells in a SageMaker notebook.</p>
<p>In this example, we use a SageMaker notebook and add these cells:</p>
<p><img src="/images/startrosstraining.png" alt=""></p>
<p>At the end of training, you will see the following output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">.
.
.
2020-03-12 21:42:57 Uploading - Uploading generated training model
2020-03-12 21:42:57 Completed - Training job completed
Training seconds: 156
Billable seconds: 156
</code></pre></div><h3 id="step-3---deploy-model">Step 3 - Deploy model</h3>
<p>From <a href="../../inference/deepar">this link</a> on deploying a model trained with DeepAR, do</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">predictor <span style="color:#f92672">=</span> estimator<span style="color:#f92672">.</span>deploy(initial_instance_count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>,instance_type<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ml.m4.xlarge</span><span style="color:#e6db74">&#39;</span>)
</code></pre></div><p>To forecast, follow instructions in the same <a href="../../inference/deepar">link</a>:</p>
<p><img src="/images/predictrossdeepar.png" alt=""></p>
<h3 id="done">Done!</h3>
</div>
          
          <p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 07 Feb 2020</p>
          <nav class="pagination mt-3">
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            

            
            <a class="nav nav-prev" href="/usecases/pneumoniasage/"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">Pneumonia detection from Chest X-ray images using SageMaker</span></a>
            
            
            <a class="nav nav-next" href="/preprocessing/"> <span class="d-none d-md-block">1. Preprocessing</span><i class="ti-arrow-right ml-2"></i></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- /details page -->



  <script src = "/js/add-on.js"></script>
  <link href="/js/add-on.css" rel="stylesheet" type="css" crossorigin="anonymous">



  </div><!-- footer -->
<footer class="section bg-gray pb-0">
  <div class="container">
    <div class="row">
      <div class="col-md-8 text-md-left text-center">
       <p></p>
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline mb-3">
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-facebook"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-vimeo-alt"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="#"><i class="ti-linkedin"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="/js/script.min.js"></script>
</body>


</html>